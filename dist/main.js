/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var b=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var M=(o,e)=>()=>(o&&(e=o(o=0)),e);var B=(o,e)=>{for(var a in e)b(o,a,{get:e[a],enumerable:!0})},O=(o,e,a,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of x(e))!F.call(o,t)&&t!==a&&b(o,t,{get:()=>e[t],enumerable:!(r=N(e,t))||r.enumerable});return o};var A=o=>O(b({},"__esModule",{value:!0}),o);var S={};B(S,{sendPasswordByMailto:()=>E});function E(o,e){let a=encodeURIComponent("Backup of your Obsidian Secure Notes password"),r=encodeURIComponent(`Here is the backup of your password for the plugin "Crypto Secure Notes":

${e}

Keep this email in a safe place and delete it as soon as possible.
Never share your password with others.`);window.open(`mailto:${o}?subject=${a}&body=${r}`)}var T=M(()=>{});var K={};B(K,{default:()=>w});module.exports=A(K);var c=require("obsidian");async function k(o){let e=new TextEncoder,a=e.encode("obsidian-encrypted-folder-salt"),r=await crypto.subtle.importKey("raw",e.encode(o),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function C(o,e){let a=new TextEncoder,r=crypto.getRandomValues(new Uint8Array(12)),t=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,a.encode(o)),i=new Uint8Array(r.byteLength+t.byteLength);return i.set(r,0),i.set(new Uint8Array(t),r.byteLength),btoa(String.fromCharCode(...i))}async function P(o,e){let a=Uint8Array.from(atob(o),n=>n.charCodeAt(0)),r=a.slice(0,12),t=a.slice(12),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},e,t);return new TextDecoder().decode(i)}var p=require("obsidian");T();function y(o){let e=o.toLowerCase();return(e==="pt-br"||e==="pt_br")&&(e="pt-BR"),e==="es"&&(e="es"),e in v?v[e]:v.en}var v={en:{title:"Encryptor Secure Notes",attention:"ATTENTION:",warningBlock:"Keep your encryption password safe! If you lose your password, it will not be possible to recover your encrypted notes. Never edit the encrypted folder path if you have already encrypted notes, as this may make data recovery impossible. Always backup your password and important notes. You can also send a backup of your password by email. I am not responsible for data loss or problems caused by using this plugin. Use with caution and always backup your data.",configTitle:"Settings",configDesc:"Set the folder path to encrypt and the encryption password.",fileInfoBlock:"Instructions: All notes in .md (Markdown) format inside the specified folder and its subfolders will be encrypted. Files of other formats will not be encrypted.",folderPath:"Folder path to encrypt",folderPathDesc:"Ex: Encrypted/",password:"Encryption password",passwordDesc:"\u26A0\uFE0F - The password will NOT be saved, only used temporarily.",passwordPlacHol:"Enter the password",encryptBtn:"\u{1F512} Encrypt",decryptBtn:"\u{1F513} Decrypt",backupEmail:"Backup password email (Optional)",backupEmailDesc:"Email to receive the password backup.",backupBtn:"Send password by email",backupBtnDesc:"Sends the password above to the backup email.",backupNotice:"Email client opened for backup.",backupNoticeError:"Fill in the backup email and password first.",infoBlock:"Manual password backup by email (Optional). The plugin uses the mailto: feature of your operating system to open the default email app with recipient, subject, and body filled. The plugin will try to open your default email client for confirmation and sending. Never share your password with others.",footer:"Thank you for using Encryptor Secure Notes! Developed by AndreLucyo2. If you want to support development, consider a donation at Ko-fi. If you like this plugin, share it with other Obsidian users.",pluginLoaded:"Plugin Encryptor Secure Notes loaded!",encryptMenu:"Encrypt folder",decryptMenu:"Decrypt folder",promptEncrypt:"Enter password to encrypt notes:",promptDecrypt:"Enter password to decrypt notes:",folderOrPasswordMissing:"Folder path or password missing.",noMarkdownFound:"No markdown files found in folder.",encryptSuccess:"Encrypted {count} notes!",emailClientOpened:"Email client opened for password backup.",decryptSuccess:"Decrypted {count} notes!",decryptError:"Error decrypting notes. Check your password and try again."},"pt-BR":{title:"Encryptor Secure Notes",attention:"ATEN\xC7\xC3O:",warningBlock:"Guarde sua senha de criptografia em local seguro! Se voc\xEA perder a senha, n\xE3o ser\xE1 poss\xEDvel recuperar suas notas criptografadas. Nunca edite o caminho da pasta criptografada se houver notas j\xE1 criptografadas, pois isso pode tornar imposs\xEDvel a recupera\xE7\xE3o dos dados. Fa\xE7a sempre backup da senha e das notas importantes. Voc\xEA tamb\xE9m pode enviar um backup da senha por email. N\xE3o me responsabilizo por perda de dados ou problemas causados pelo uso deste plugin. Aproveite com cautela e sempre fa\xE7a backup dos seus dados.",configTitle:"Configura\xE7\xF5es",configDesc:"Configure o caminho da pasta a ser criptografada e a senha de criptografia.",fileInfoBlock:"Instru\xE7\xF5es: Todas as notas no formato .md (Markdown) dentro da pasta informada e suas subpastas ser\xE3o criptografadas. Arquivos de outros formatos n\xE3o ser\xE3o criptografados.",folderPath:"Caminho da pasta a criptografar",folderPathDesc:"Ex: Encriptadas/",password:"Senha de criptografia",passwordDesc:"\u26A0\uFE0F - A senha N\xC3O ser\xE1 salva, apenas usada temporariamente.",passwordPlacHol:"Digite a senha",encryptBtn:"\u{1F512} Criptografar",decryptBtn:"\u{1F513} Descriptografar",backupEmail:"Email backup de senha (Opcional)",backupEmailDesc:"Email para receber o backup da senha.",backupBtn:"Enviar senha por email",backupBtnDesc:"Envia a senha digitada acima para o email de backup informado.",backupNotice:"Cliente de email aberto para envio do backup.",backupNoticeError:"Preencha o email de backup e a senha antes.",infoBlock:"Backup manual da senha por email (Opcional). O plugin utiliza o recurso mailto: do seu sistema operacional para abrir o aplicativo de email padr\xE3o j\xE1 com o destinat\xE1rio, assunto e corpo preenchidos. O plugin tentar\xE1 abrir seu cliente de email padr\xE3o, para confirma\xE7\xE3o e envio. Nunca compartilhe sua senha com terceiros.",footer:"Obrigado por usar o Encryptor Secure Notes! Desenvolvido por AndreLucyo2. Se quiser apoiar o desenvolvimento, considere uma doa\xE7\xE3o no Ko-fi. Se voc\xEA gosta deste plugin, compartilhe com outros usu\xE1rios do Obsidian!.",pluginLoaded:"Plugin Encrypted Folder carregado!",encryptMenu:"Criptografar pasta",decryptMenu:"Descriptografar pasta",promptEncrypt:"Digite a senha para criptografar as notas:",promptDecrypt:"Digite a senha para descriptografar as notas:",folderOrPasswordMissing:"Caminho da pasta ou senha n\xE3o preenchidos.",noMarkdownFound:"Nenhum arquivo markdown encontrado na pasta.",encryptSuccess:"Criptografadas {count} notas!",emailClientOpened:"Cliente de email aberto para backup da senha.",decryptSuccess:"Descriptografadas {count} notas!",decryptError:"Erro ao descriptografar as notas. Verifique a senha e tente novamente."},es:{title:"Encryptor Secure Notes",attention:"ATENCI\xD3N:",warningBlock:"\xA1Guarda tu contrase\xF1a de cifrado en un lugar seguro! Si pierdes la contrase\xF1a, no ser\xE1 posible recuperar tus notas cifradas. Nunca edites la ruta de la carpeta cifrada si ya tienes notas cifradas, ya que esto puede hacer imposible la recuperaci\xF3n de los datos. Haz siempre copias de seguridad de la contrase\xF1a y de las notas importantes. Tambi\xE9n puedes enviar una copia de seguridad de la contrase\xF1a por correo electr\xF3nico. No me responsabilizo por la p\xE9rdida de datos o problemas causados por el uso de este plugin. Util\xEDzalo con precauci\xF3n y haz siempre copias de seguridad de tus datos.",configTitle:"Configuraciones",configDesc:"Configura la ruta de la carpeta a cifrar y la contrase\xF1a de cifrado.",fileInfoBlock:"Instrucciones: Todas las notas en formato .md (Markdown) dentro de la carpeta indicada y sus subcarpetas ser\xE1n cifradas. Archivos de otros formatos no ser\xE1n cifrados.",folderPath:"Ruta de la carpeta a cifrar",folderPathDesc:"Ej: Encriptadas/",password:"Contrase\xF1a de cifrado",passwordDesc:"\u26A0\uFE0F - La contrase\xF1a NO se guardar\xE1, solo se usar\xE1 temporalmente.",passwordPlacHol:"Ingresa la contrase\xF1a",encryptBtn:"\u{1F512} Cifrar",decryptBtn:"\u{1F513} Descifrar",backupEmail:"Correo de respaldo de contrase\xF1a (Opcional)",backupEmailDesc:"Correo electr\xF3nico para recibir la copia de seguridad de la contrase\xF1a.",backupBtn:"Enviar contrase\xF1a por correo",backupBtnDesc:"Env\xEDa la contrase\xF1a escrita arriba al correo de respaldo.",backupNotice:"Cliente de correo abierto para el respaldo.",backupNoticeError:"Completa el correo de respaldo y la contrase\xF1a primero.",infoBlock:"Respaldo manual de la contrase\xF1a por correo (Opcional). El plugin utiliza la funci\xF3n mailto: de tu sistema operativo para abrir la aplicaci\xF3n de correo predeterminada con destinatario, asunto y cuerpo rellenados. El plugin intentar\xE1 abrir tu cliente de correo predeterminado para confirmaci\xF3n y env\xEDo. Nunca compartas tu contrase\xF1a con otros.",footer:"\xA1Gracias por usar Encryptor Secure Notes! Desarrollado por AndreLucyo2. Si quieres apoyar el desarrollo, considera una donaci\xF3n en Ko-fi. Si te gusta este plugin, comp\xE1rtelo con otros usuarios de Obsidian!.",pluginLoaded:"\xA1Plugin Encrypted Folder cargado!",encryptMenu:"Cifrar carpeta",decryptMenu:"Descifrar carpeta",promptEncrypt:"Ingresa la contrase\xF1a para cifrar las notas:",promptDecrypt:"Ingresa la contrase\xF1a para descifrar las notas:",folderOrPasswordMissing:"Ruta de la carpeta o contrase\xF1a faltante.",noMarkdownFound:"No se encontraron archivos markdown en la carpeta.",encryptSuccess:"\xA1Cifradas {count} notas!",emailClientOpened:"Cliente de correo abierto para respaldo de contrase\xF1a.",decryptSuccess:"\xA1Descifradas {count} notas!",decryptError:"Error al descifrar las notas. Verifica la contrase\xF1a e int\xE9ntalo de nuevo."}};var m=class extends p.PluginSettingTab{constructor(e,a){super(e,a),this.plugin=a}display(){let{containerEl:e}=this;e.empty();let a="en",r=this.app.vault;typeof r.getConfig=="function"&&(a=r.getConfig("locale")||"en");let t=y(a);e.createEl("h1",{text:t.title});let i=e.createDiv({cls:"warning-block"});i.createEl("span",{cls:"warning-block-title",text:t.attention}),i.createEl("br"),i.createEl("span",{cls:"warning-block-text",text:t.warningBlock}),e.createEl("h1",{text:t.configTitle}),e.createEl("p",{text:t.configDesc}),e.createDiv({cls:"file-info-block"}).setText(t.fileInfoBlock),new p.Setting(e).setName(t.folderPath).setDesc(t.folderPathDesc).addText(l=>l.setPlaceholder(t.folderPathDesc).setValue(this.plugin.settings.folderPath).onChange(async d=>{this.plugin.settings.folderPath=d.trim(),await this.plugin.saveSettings()}));let s="";new p.Setting(e).setName(t.password).setDesc(t.passwordDesc).addText(l=>l.setPlaceholder(t.passwordPlacHol).onChange(d=>{s=d.trim()})),new p.Setting(e).addButton(l=>l.setButtonText(t.encryptBtn).setCta().onClick(async()=>{await this.plugin.encryptFolder(s)})),new p.Setting(e).addButton(l=>l.setButtonText(t.decryptBtn).onClick(async()=>{await this.plugin.decryptFolder(s)}));let f=e.createEl("hr");f.style.marginBottom="1em";let u=e.createDiv({cls:"file-info-block"});u.style.marginBottom="1em",u.setText(t.infoBlock),new p.Setting(e).setName(t.backupEmail).setDesc(t.backupEmailDesc).addText(l=>l.setPlaceholder(t.backupEmailDesc).setValue(this.plugin.settings.backupEmail).onChange(async d=>{this.plugin.settings.backupEmail=d,await this.plugin.saveSettings()})),new p.Setting(e).setName(t.backupBtn).setDesc(t.backupBtnDesc).addButton(l=>l.setButtonText(t.backupBtn).setCta().onClick(()=>{let d=this.plugin.settings.backupEmail;d&&s?(E(d,s),new p.Notice(t.backupNotice)):new p.Notice(t.backupNoticeError)})),e.createDiv({cls:"footer-block"}).setText(t.footer)}};var g=require("obsidian"),h=class extends g.Modal{constructor(e,a,r){super(e),this.promptText=a,this.callback=r}onOpen(){let e="";new g.Setting(this.contentEl).setName(this.promptText).addText(a=>a.setPlaceholder("Password...").setValue("").onChange(r=>e=r).inputEl.setAttribute("type","password")),new g.Setting(this.contentEl).addButton(a=>a.setButtonText("OK").setCta().onClick(()=>{this.callback(e),this.close()}))}onClose(){this.contentEl.empty()}};var I={folderPath:"",backupEmail:""},w=class extends c.Plugin{getTranslation(){let e="en",a=this.app.vault;return typeof a.getConfig=="function"&&(e=a.getConfig("locale")||"en"),y(e)}async onload(){await this.loadSettings(),this.addSettingTab(new m(this.app,this));let e=this.getTranslation();new c.Notice(e.pluginLoaded),this.registerEvent(this.app.workspace.on("file-menu",(a,r)=>{if(!(r instanceof c.TFolder))return;let t=this.settings.folderPath.replace(/\/$/,""),i=r.path.replace(/\/$/,"");t===i&&(a.addItem(n=>{n.setTitle(this.getTranslation().encryptMenu).setIcon("lock").onClick(async()=>{let s=await this.promptPassword(this.getTranslation().promptEncrypt);s&&await this.encryptFolder(s)})}),a.addItem(n=>{n.setTitle(this.getTranslation().decryptMenu).setIcon("unlock").onClick(async()=>{let s=await this.promptPassword(this.getTranslation().promptDecrypt);s&&await this.decryptFolder(s)})}))}))}async promptPassword(e){return await new Promise(a=>{new h(this.app,e,a).open()})}async encryptFolder(e){let a=this.getTranslation();if(!this.settings.folderPath||!e){new c.Notice(a.folderOrPasswordMissing);return}let r=this.settings.folderPath.replace(/\/$/,""),t=this.app.vault.getMarkdownFiles().filter(n=>n.path.startsWith(`${r}/`));if(t.length===0){new c.Notice(a.noMarkdownFound);return}let i=await k(e);for(let n of t){let s=await this.app.vault.read(n);if(s.startsWith("ENCRYPTED::"))continue;let D=`ENCRYPTED::${await C(s,i)}`;await this.app.vault.modify(n,D)}if(new c.Notice(a.encryptSuccess.replace("{count}",t.length.toString())),this.settings.backupEmail){let{sendPasswordByMailto:n}=await Promise.resolve().then(()=>(T(),S));n(this.settings.backupEmail,e),new c.Notice(a.emailClientOpened)}}async decryptFolder(e){let a=this.getTranslation();if(!this.settings.folderPath||!e){new c.Notice(a.folderOrPasswordMissing);return}let r=this.settings.folderPath.replace(/\/$/,""),t=this.app.vault.getMarkdownFiles().filter(n=>n.path.startsWith(`${r}/`));if(t.length===0){new c.Notice(a.noMarkdownFound);return}let i=await k(e);try{for(let n of t){let s=await this.app.vault.read(n);if(!s.startsWith("ENCRYPTED::"))continue;let f=s.slice(11),u=await P(f,i);await this.app.vault.modify(n,u)}new c.Notice(a.decryptSuccess.replace("{count}",t.length.toString()))}catch(n){console.error(n),new c.Notice(a.decryptError)}}async loadSettings(){this.settings=Object.assign({},I,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
