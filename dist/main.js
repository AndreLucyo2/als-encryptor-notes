/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var k=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var M=(n,e)=>()=>(n&&(e=n(n=0)),e);var B=(n,e)=>{for(var a in e)k(n,a,{get:e[a],enumerable:!0})},O=(n,e,a,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of x(e))!F.call(n,t)&&t!==a&&k(n,t,{get:()=>e[t],enumerable:!(r=N(e,t))||r.enumerable});return n};var A=n=>O(k({},"__esModule",{value:!0}),n);var S={};B(S,{sendPasswordByMailto:()=>v});function v(n,e){let a=encodeURIComponent("Backup of your Obsidian Secure Notes password"),r=encodeURIComponent(`Here is the backup of your password for the plugin "Crypto Secure Notes":

${e}

Keep this email in a safe place and delete it as soon as possible.
Never share your password with others.`);window.open(`mailto:${n}?subject=${a}&body=${r}`)}var T=M(()=>{});var L={};B(L,{default:()=>w});module.exports=A(L);var c=require("obsidian");async function E(n){let e=new TextEncoder,a=e.encode("obsidian-encrypted-folder-salt"),r=await crypto.subtle.importKey("raw",e.encode(n),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function D(n,e){let a=new TextEncoder,r=crypto.getRandomValues(new Uint8Array(12)),t=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,a.encode(n)),s=new Uint8Array(r.byteLength+t.byteLength);return s.set(r,0),s.set(new Uint8Array(t),r.byteLength),btoa(String.fromCharCode(...s))}async function P(n,e){let a=Uint8Array.from(atob(n),o=>o.charCodeAt(0)),r=a.slice(0,12),t=a.slice(12),s=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},e,t);return new TextDecoder().decode(s)}var p=require("obsidian");T();function f(n){let e=n.toLowerCase();return(e==="pt-br"||e==="pt_br")&&(e="pt-BR"),e==="es"&&(e="es"),e in C?C[e]:C.en}var C={en:{title:"Encryptor Secure Notes",attention:"ATTENTION:",warningBlock:"<b>Keep your encryption password safe!</b><br>If you lose your password, <u>it will not be possible to recover your encrypted notes</u>.<br><b>Never edit the encrypted folder path if you have already encrypted notes</b>, as this may make data recovery impossible.<br>Always backup your password and important notes.<br>You can also send a backup of your password by email.<br>I am not responsible for data loss or problems caused by using this plugin.<br>Use with caution and always backup your data.<br>",configTitle:"Settings",configDesc:"Set the folder path to encrypt and the encryption password.",fileInfoBlock:"<b>Instructions:</b><br>All notes in <b>.md</b> (Markdown) format inside the specified folder <u>and its subfolders</u> will be encrypted.<br><span style='color:#c00000;'>Files of other formats <b>will not</b> be encrypted.</span>",folderPath:"Folder path to encrypt",folderPathDesc:"Ex: Encrypted/",password:"Encryption password",passwordDesc:"\u26A0\uFE0F - The password will NOT be saved, only used temporarily.",passwordPlacHol:"Enter the password",encryptBtn:"\u{1F512} Encrypt",decryptBtn:"\u{1F513} Decrypt",backupEmail:"Backup password email (Optional)",backupEmailDesc:"Email to receive the password backup.",backupBtn:"Send password by email",backupBtnDesc:"Sends the password above to the backup email.",backupNotice:"Email client opened for backup.",backupNoticeError:"Fill in the backup email and password first.",infoBlock:"<h2>Manual password backup by email (Optional)</h2>The plugin uses the <strong>mailto:</strong> feature of your operating system to open the default email app with recipient, subject, and body filled.<br>The plugin will try to open your default email client for confirmation and sending.<br><span style='color: #e09000'>Never share your password with others.</span>",footer:"<div style='margin-bottom:0.5em;'>Thank you for using <b>Encryptor Secure Notes</b>!<br>Developed by <a href='https://github.com/AndreLucyo2' target='_blank' style='color:#90cdf4;'>AndreLucyo2</a></div><div style='margin-bottom:0.5em;'>If you want to support development, consider a donation:<br><a href='https://ko-fi.com/andrelucyo' target='_blank'><img src='https://cdn.ko-fi.com/cdn/kofi2.png?v=3' alt='Ko-fi' style='height:32px;vertical-align:middle;margin-right:8px;'></a></div><div style='font-size:0.9em;color:#bbb;'><i>If you like this plugin, share it with other Obsidian users!</i></div>",pluginLoaded:"Plugin Encryptor Secure Notes loaded!",encryptMenu:"Encrypt folder",decryptMenu:"Decrypt folder",promptEncrypt:"Enter password to encrypt notes:",promptDecrypt:"Enter password to decrypt notes:",folderOrPasswordMissing:"Folder path or password missing.",noMarkdownFound:"No markdown files found in folder.",encryptSuccess:"Encrypted {count} notes!",emailClientOpened:"Email client opened for password backup.",decryptSuccess:"Decrypted {count} notes!",decryptError:"Error decrypting notes. Check your password and try again."},"pt-BR":{title:"Encryptor Secure Notes",attention:"ATEN\xC7\xC3O:",warningBlock:"<b>Guarde sua senha de criptografia em local seguro!</b><br>Se voc\xEA perder a senha, <u>n\xE3o ser\xE1 poss\xEDvel recuperar suas notas criptografadas</u>.<br><b>Nunca edite o caminho da pasta criptografada se houver notas j\xE1 criptografadas</b>, pois isso pode tornar imposs\xEDvel a recupera\xE7\xE3o dos dados.<br>Fa\xE7a sempre backup da senha e das notas importantes.<br>Voc\xEA tamb\xE9m pode enviar um backup da senha por email.<br>N\xE3o me responsabilizo por perda de dados ou problemas causados pelo uso deste plugin.<br>Aproveite com cautela e sempre fa\xE7a backup dos seus dados.<br>",configTitle:"Configura\xE7\xF5es",configDesc:"Configure o caminho da pasta a ser criptografada e a senha de criptografia.",fileInfoBlock:"<b>Instru\xE7\xF5es:</b><br>Todas as notas no formato <b>.md</b> (Markdown) dentro da pasta informada <u>e suas subpastas</u> ser\xE3o criptografadas.<br><span style='color:#c00000;'>Arquivos de outros formatos <b>n\xE3o</b> ser\xE3o criptografados.</span>",folderPath:"Caminho da pasta a criptografar",folderPathDesc:"Ex: Encriptadas/",password:"Senha de criptografia",passwordDesc:"\u26A0\uFE0F - A senha N\xC3O ser\xE1 salva, apenas usada temporariamente.",passwordPlacHol:"Digite a senha",encryptBtn:"\u{1F512} Criptografar",decryptBtn:"\u{1F513} Descriptografar",backupEmail:"Email backup de senha (Opcional)",backupEmailDesc:"Email para receber o backup da senha.",backupBtn:"Enviar senha por email",backupBtnDesc:"Envia a senha digitada acima para o email de backup informado.",backupNotice:"Cliente de email aberto para envio do backup.",backupNoticeError:"Preencha o email de backup e a senha antes.",infoBlock:"<h2>Backup manual da senha por email (Opcional)</h2>O plugin utiliza o recurso <strong>mailto:</strong> do seu sistema operacional para abrir o aplicativo de email padr\xE3o j\xE1 com o destinat\xE1rio, assunto e corpo preenchidos.<br>O plugin tentar\xE1 abrir seu cliente de email padr\xE3o, para confirma\xE7\xE3o e envio.<br><span style='color: #e09000'>Nunca compartilhe sua senha com terceiros.</span>",footer:"<div style='margin-bottom:0.5em;'>Obrigado por usar o <b>Encryptor Secure Notes</b>!<br>Desenvolvido por <a href='https://github.com/AndreLucyo2' target='_blank' style='color:#90cdf4;'>AndreLucyo2</a></div><div style='margin-bottom:0.5em;'>Se quiser apoiar o desenvolvimento, considere uma doa\xE7\xE3o:<br><a href='https://ko-fi.com/andrelucyo' target='_blank'><img src='https://cdn.ko-fi.com/cdn/kofi2.png?v=3' alt='Ko-fi' style='height:32px;vertical-align:middle;margin-right:8px;'></a></div><div style='font-size:0.9em;color:#bbb;'><i>Se voc\xEA gosta deste plugin, compartilhe com outros usu\xE1rios do Obsidian!</i></div>",pluginLoaded:"Plugin Encrypted Folder carregado!",encryptMenu:"Criptografar pasta",decryptMenu:"Descriptografar pasta",promptEncrypt:"Digite a senha para criptografar as notas:",promptDecrypt:"Digite a senha para descriptografar as notas:",folderOrPasswordMissing:"Caminho da pasta ou senha n\xE3o preenchidos.",noMarkdownFound:"Nenhum arquivo markdown encontrado na pasta.",encryptSuccess:"Criptografadas {count} notas!",emailClientOpened:"Cliente de email aberto para backup da senha.",decryptSuccess:"Descriptografadas {count} notas!",decryptError:"Erro ao descriptografar as notas. Verifique a senha e tente novamente."},es:{title:"Encryptor Secure Notes",attention:"ATENCI\xD3N:",warningBlock:"<b>\xA1Guarda tu contrase\xF1a de cifrado en un lugar seguro!</b><br>Si pierdes la contrase\xF1a, <u>no ser\xE1 posible recuperar tus notas cifradas</u>.<br><b>Nunca edites la ruta de la carpeta cifrada si ya tienes notas cifradas</b>, ya que esto puede hacer imposible la recuperaci\xF3n de los datos.<br>Haz siempre copias de seguridad de la contrase\xF1a y de las notas importantes.<br>Tambi\xE9n puedes enviar una copia de seguridad de la contrase\xF1a por correo electr\xF3nico.<br>No me responsabilizo por la p\xE9rdida de datos o problemas causados por el uso de este plugin.<br>Util\xEDzalo con precauci\xF3n y haz siempre copias de seguridad de tus datos.<br>",configTitle:"Configuraciones",configDesc:"Configura la ruta de la carpeta a cifrar y la contrase\xF1a de cifrado.",fileInfoBlock:"<b>Instrucciones:</b><br>Todas las notas en formato <b>.md</b> (Markdown) dentro de la carpeta indicada <u>y sus subcarpetas</u> ser\xE1n cifradas.<br><span style='color:#c00000;'>Archivos de otros formatos <b>no</b> ser\xE1n cifrados.</span>",folderPath:"Ruta de la carpeta a cifrar",folderPathDesc:"Ej: Encriptadas/",password:"Contrase\xF1a de cifrado",passwordDesc:"\u26A0\uFE0F - La contrase\xF1a NO se guardar\xE1, solo se usar\xE1 temporalmente.",passwordPlacHol:"Ingresa la contrase\xF1a",encryptBtn:"\u{1F512} Cifrar",decryptBtn:"\u{1F513} Descifrar",backupEmail:"Correo de respaldo de contrase\xF1a (Opcional)",backupEmailDesc:"Correo electr\xF3nico para recibir la copia de seguridad de la contrase\xF1a.",backupBtn:"Enviar contrase\xF1a por correo",backupBtnDesc:"Env\xEDa la contrase\xF1a escrita arriba al correo de respaldo.",backupNotice:"Cliente de correo abierto para el respaldo.",backupNoticeError:"Completa el correo de respaldo y la contrase\xF1a primero.",infoBlock:"<h2>Respaldo manual de la contrase\xF1a por correo (Opcional)</h2>El plugin utiliza la funci\xF3n <strong>mailto:</strong> de tu sistema operativo para abrir la aplicaci\xF3n de correo predeterminada con destinatario, asunto y cuerpo rellenados.<br>El plugin intentar\xE1 abrir tu cliente de correo predeterminado para confirmaci\xF3n y env\xEDo.<br><span style='color: #e09000'>Nunca compartas tu contrase\xF1a con otros.</span>",footer:"<div style='margin-bottom:0.5em;'>\xA1Gracias por usar <b>Encryptor Secure Notes</b>!<br>Desarrollado por <a href='https://github.com/AndreLucyo2' target='_blank' style='color:#90cdf4;'>AndreLucyo2</a></div><div style='margin-bottom:0.5em;'>Si quieres apoyar el desarrollo, considera una donaci\xF3n:<br><a href='https://ko-fi.com/andrelucyo' target='_blank'><img src='https://cdn.ko-fi.com/cdn/kofi2.png?v=3' alt='Ko-fi' style='height:32px;vertical-align:middle;margin-right:8px;'></a></div><div style='font-size:0.9em;color:#bbb;'><i>Si te gusta este plugin, \xA1comp\xE1rtelo con otros usuarios de Obsidian!</i></div>",pluginLoaded:"\xA1Plugin Encrypted Folder cargado!",encryptMenu:"Cifrar carpeta",decryptMenu:"Descifrar carpeta",promptEncrypt:"Ingresa la contrase\xF1a para cifrar las notas:",promptDecrypt:"Ingresa la contrase\xF1a para descifrar las notas:",folderOrPasswordMissing:"Ruta de la carpeta o contrase\xF1a faltante.",noMarkdownFound:"No se encontraron archivos markdown en la carpeta.",encryptSuccess:"\xA1Cifradas {count} notas!",emailClientOpened:"Cliente de correo abierto para respaldo de contrase\xF1a.",decryptSuccess:"\xA1Descifradas {count} notas!",decryptError:"Error al descifrar las notas. Verifica la contrase\xF1a e int\xE9ntalo de nuevo."}};var b=class extends p.PluginSettingTab{constructor(e,a){super(e,a),this.plugin=a}display(){let{containerEl:e}=this;e.empty();let a="en",r=this.app.vault;typeof r.getConfig=="function"&&(a=r.getConfig("locale")||"en");let t=f(a);e.createEl("h1",{text:t.title});let s=document.createElement("div");s.style.background="#fff8c6",s.style.border="1px solid #e0b000",s.style.padding="1em",s.style.marginBottom="1em",s.style.borderRadius="6px",s.innerHTML=`<span style='color:#c00000; font-weight:bold;'>${t.attention}</span><br><span style='color:#c00000;'>${t.warningBlock}</span>`,e.appendChild(s),e.createEl("h1",{text:t.configTitle}),e.createEl("p",{text:t.configDesc});let o=document.createElement("div");o.style.background="#f7f7e0",o.style.color="#a08000",o.style.padding="0.7em",o.style.margin="0.5em 0 1em 0",o.style.borderRadius="6px",o.style.fontSize="0.98em",o.innerHTML=t.fileInfoBlock,e.appendChild(o),new p.Setting(e).setName(t.folderPath).setDesc(t.folderPathDesc).addText(l=>l.setPlaceholder(t.folderPathDesc).setValue(this.plugin.settings.folderPath).onChange(async u=>{this.plugin.settings.folderPath=u.trim(),await this.plugin.saveSettings()}));let i="";new p.Setting(e).setName(t.password).setDesc(t.passwordDesc).addText(l=>l.setPlaceholder(t.passwordPlacHol).onChange(u=>{i=u.trim()})),new p.Setting(e).addButton(l=>l.setButtonText(t.encryptBtn).setCta().onClick(async()=>{await this.plugin.encryptFolder(i)})),new p.Setting(e).addButton(l=>l.setButtonText(t.decryptBtn).onClick(async()=>{await this.plugin.decryptFolder(i)}));let y=document.createElement("hr");y.style.marginBottom="1em",e.appendChild(y);let g=document.createElement("div");g.style.marginBottom="1em",g.innerHTML=t.infoBlock,e.appendChild(g),new p.Setting(e).setName(t.backupEmail).setDesc(t.backupEmailDesc).addText(l=>l.setPlaceholder(t.backupEmailDesc).setValue(this.plugin.settings.backupEmail).onChange(async u=>{this.plugin.settings.backupEmail=u,await this.plugin.saveSettings()})),new p.Setting(e).setName(t.backupBtn).setDesc(t.backupBtnDesc).addButton(l=>l.setButtonText(t.backupBtn).setCta().onClick(()=>{let u=this.plugin.settings.backupEmail;u&&i?(v(u,i),new p.Notice(t.backupNotice)):new p.Notice(t.backupNoticeError)}));let d=document.createElement("div");d.style.background="#222",d.style.color="#fff",d.style.textAlign="center",d.style.padding="1.5em 0 1em 0",d.style.marginTop="2em",d.style.borderRadius="8px",d.innerHTML=t.footer,e.appendChild(d)}};var m=require("obsidian"),h=class extends m.Modal{constructor(e,a,r){super(e),this.promptText=a,this.callback=r}onOpen(){let e="";new m.Setting(this.contentEl).setName(this.promptText).addText(a=>a.setPlaceholder("Password...").setValue("").onChange(r=>e=r).inputEl.setAttribute("type","password")),new m.Setting(this.contentEl).addButton(a=>a.setButtonText("OK").setCta().onClick(()=>{this.callback(e),this.close()}))}onClose(){this.contentEl.empty()}};var I={folderPath:"",backupEmail:""},w=class extends c.Plugin{getTranslation(){let e="en",a=this.app.vault;return typeof a.getConfig=="function"&&(e=a.getConfig("locale")||"en"),f(e)}async onload(){await this.loadSettings(),this.addSettingTab(new b(this.app,this));let e=this.getTranslation();new c.Notice(e.pluginLoaded),this.registerEvent(this.app.workspace.on("file-menu",(a,r)=>{if(!(r instanceof c.TFolder))return;let t=this.settings.folderPath.replace(/\/$/,""),s=r.path.replace(/\/$/,"");t===s&&(a.addItem(o=>{o.setTitle(this.getTranslation().encryptMenu).setIcon("lock").onClick(async()=>{let i=await this.promptPassword(this.getTranslation().promptEncrypt);i&&await this.encryptFolder(i)})}),a.addItem(o=>{o.setTitle(this.getTranslation().decryptMenu).setIcon("unlock").onClick(async()=>{let i=await this.promptPassword(this.getTranslation().promptDecrypt);i&&await this.decryptFolder(i)})}))}))}async promptPassword(e){return await new Promise(a=>{new h(this.app,e,a).open()})}async encryptFolder(e){let a=this.getTranslation();if(!this.settings.folderPath||!e){new c.Notice(a.folderOrPasswordMissing);return}let r=this.settings.folderPath.replace(/\/$/,""),t=this.app.vault.getMarkdownFiles().filter(o=>o.path.startsWith(`${r}/`));if(t.length===0){new c.Notice(a.noMarkdownFound);return}let s=await E(e);for(let o of t){let i=await this.app.vault.read(o);if(i.startsWith("ENCRYPTED::"))continue;let d=`ENCRYPTED::${await D(i,s)}`;await this.app.vault.modify(o,d)}if(new c.Notice(a.encryptSuccess.replace("{count}",t.length.toString())),this.settings.backupEmail){let{sendPasswordByMailto:o}=await Promise.resolve().then(()=>(T(),S));o(this.settings.backupEmail,e),new c.Notice(a.emailClientOpened)}}async decryptFolder(e){let a=this.getTranslation();if(!this.settings.folderPath||!e){new c.Notice(a.folderOrPasswordMissing);return}let r=this.settings.folderPath.replace(/\/$/,""),t=this.app.vault.getMarkdownFiles().filter(o=>o.path.startsWith(`${r}/`));if(t.length===0){new c.Notice(a.noMarkdownFound);return}let s=await E(e);try{for(let o of t){let i=await this.app.vault.read(o);if(!i.startsWith("ENCRYPTED::"))continue;let y=i.slice(11),g=await P(y,s);await this.app.vault.modify(o,g)}new c.Notice(a.decryptSuccess.replace("{count}",t.length.toString()))}catch(o){console.error(o),new c.Notice(a.decryptError)}}async loadSettings(){this.settings=Object.assign({},I,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
